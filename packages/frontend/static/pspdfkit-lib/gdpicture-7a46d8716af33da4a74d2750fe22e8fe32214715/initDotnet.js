import{dotnet}from"./dotnet.js";const ENVIRONMENT_IS_NODE="string"==typeof globalThis.process?.versions?.node,ENVIRONMENT_IS_DENO="object"==typeof window&&"Deno"in window||"object"==typeof self&&"Deno"in self;let require;export async function initialize(){if(null!=globalThis.process?.versions?.node){const{createRequire:e}=await import("module");require=e(import.meta.url)}}export async function initDotnet(e){await initialize();const{getAssemblyExports:t,getConfig:i,Module:o}=await dotnet.withModuleConfig({locateFile:t=>{if(ENVIRONMENT_IS_NODE){const{dirname:e}=require("node:path"),{fileURLToPath:i}=require("node:url");return`${e(i(import.meta.url))}/${t}`}if(ENVIRONMENT_IS_DENO){return`file://${new URL(".",import.meta.url).pathname}${t.replace("./","")}`}return`${e}/${t}`}}).create();globalThis.gdPicture={module:o,baseUrl:e};const n=await t(i().mainAssemblyName);return await n.GdPictureWasm.API.Initialize(),{Assemblies:n,Module:o,ResolvedBaseUrl:e}}